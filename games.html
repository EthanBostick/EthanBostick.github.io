<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ethan | Games</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="styles/normalize.css">
	<link rel="stylesheet" href="styles/styles.css">
	<script src="https://cjrtnc.leaningtech.com/3.0/cj3loader.js"></script>
</head>
<body>

	<header class="site-header">
		<div class="container">
			<h1 class="logo">
				ethan@etonkabonk<span class="prompt-text">:<span class="dir-path">~/games</span>$</span>
			</h1>
			<nav>
				<a href="index.html">../home</a>
				<a href="projects.html">../projects</a>
				<a href="games.html" class="active">./games</a>
			</nav>
		</div>
	</header>

	<main class="container">
		<div class="game-grid">	
			<aside class="game-menu">
				<h3>Available Cartridges</h3>
				<ul>
					<li><a href="?id=zork" class="game-link" id="link-zork">> Dungeon of Ethan (Zork)</a></li>
					<li><a href="?id=space" class="game-link" id="link-space">> Project Bad Math</a></li>
				</ul>
				
				<div class="instructions">
					<h4>How to Play</h4>
					<p>1. Select a cartridge above.</p>
					<p>2. Wait for the JVM to boot.</p>
					<p>3. Click the terminal to focus.</p>
					<p>4. Type commands.</p>
				</div>
			</aside>

			<section class="game-display">
				<div class="terminal-window">
					<div class="terminal-bar">
						<span class="title">Java Virtual Machine - /dev/tty1</span>
					</div>
					<div id="console-display">
						<p class="status-text">Select a game to initialize system...</p>
					</div>
				</div>
			</section>
		</div>

		<section class="man-pages">
			<div class="doc-header">
				<h2>/usr/share/doc/games</h2>
			</div>

			<article class="man-entry" id="doc-zork">
				<div class="man-header">
					<span class="cmd-name">ZORK(1)</span>
					<span class="cmd-date">DEC 2024</span>
					<span class="cmd-name">USER COMMANDS</span>
				</div>

				<div class="man-body">
					<div class="man-section">
						<h3>NAME</h3>
						<p><strong>DungeonOfEthan</strong> - a text-based adventure in the fictional Ethan's mind.</p>
					</div>

					<div class="man-section">
						<h3>SYNOPSIS (IMAGES)</h3>
						<div class="man-gallery">
							<figure class="terminal-figure">
								<img src="images/QuestSystemLight.png" alt="Zork UML" class="img-content">
								<figcaption>Fig 1. Initial UML design of quest system</figcaption>
							</figure>

							<figure class="terminal-figure">
								<img src="images/zorkPlanning.png" alt="Dungeon Planning" class="img-content">
								<figcaption>Fig 2. Early development map sketch & planning</figcaption>
							</figure>
						</div>
					</div>

					<div class="man-section">
						<h3>DESCRIPTION</h3>
						<p>
							Dungeon of Ethan is a Java-based implementation of the classic Zork logic.
							The player explores a complex dungeon, solving puzzles and completing quests using
							natural language commands built with object-oriented programming and design.
						</p>
						<p>
							Features include a custom parser, state-saving mechanics, quests, item hints, 
							random events, and a weighted inventory system.
						</p>
					</div>

					<div class="man-section">
						<h3>CONTROLS</h3>
						<ul class="man-list">
							<li><span class="arg">n, s, e, w</span> : Move in cardinal directions.</li>
							<li><span class="arg">take [item]</span> : Add item to inventory.</li>
							<li><span class="arg">examine [obj]</span> : Get detailed description.</li>
							<li><span class="arg">hint [obj]</span> : show item actions.</li>
							<li><span class="arg">take [questName] quest</span> : Take a quest from quest board.</li>
							<li><span class="arg">qb/quests</span> : view current quests.</li>
							<li><span class="arg">submit/turnin [questName]</span> : submit a quest at it's questboard.</li>
						</ul>
					</div>

					<div class="man-section">
						<h3>AUTHORS</h3>
						<p>Written by Ethan Bostick, Brooke Breneman, and Keith Gray. Based on original works by Infocom.</p>
					</div>
				</div>
			</article>

			<hr class="doc-divider">

			<article class="man-entry" id="doc-other">
				<div class="man-header">
					<span class="cmd-name">ProjectBadMath(1)</span>
					<span class="cmd-date">MAY 2024</span>
					<span class="cmd-name">USER COMMANDS</span>
				</div>

				<div class="man-body">
					<div class="man-section">
						<h3>NAME</h3>
						<p><strong>SpaceGame</strong> - An experimental text-based strategy game.</p>
					</div>

					<div class="man-section">
						<h3>DESCRIPTION</h3>
						<p>
							The first game I designed from the ground up as a Freshman final project. The
							design process and implementation of this game greatly highlighted the value 
							of our future object oriented design education.
							
						</p>
						<p>
							Features include terminal-based input, semi turn-based combat, procedural maps,
						   	and a replayable gameplay loop revolving around scoring.	
						</p>
					</div>

					<div class="man-section">
						<h3>CONTROLS</h3>
						<ul class="man-list">
							<li><span class="arg">help</span> : view the game manual.</li>
							<li><span class="arg">qqq</span> : quit the game and show end stats.</li>
						</ul>
					</div>

					<div class="man-section">
						<h3>AUTHORS</h3>
						<p>Written by Ethan Bostick and Garrett Mckenzie. Fueled by coffee and built through late nights.</p>
					</div>
				</div>
			</article>

		</section>
	</main>

	<script>
		(async function() {
			// 1. Check URL for "?id=xyz"
			const urlParams = new URLSearchParams(window.location.search);
			const gameId = urlParams.get('id');
			const games = {
				'zork': { 
					jar: 'Zork.jar', 
					name: 'Dungeon of Ethan',
					// These strings are passed to public static void main(String[] args)
					args: ["req.zork"] 
				},
				'space': { 
					jar: 'BadMath.jar', 
					name: 'Project Bad Math',
					args: [] // No special args for this one
				}
			};

			const consoleElement = document.getElementById('console-display');

			if (gameId && games[gameId]) {
				// Highlight the active link
				document.getElementById('link-' + gameId).classList.add('active-game');
				
				try {
					consoleElement.innerHTML = `<p class="status-text">Booting ${games[gameId].name}...</p>`;
					
					await cheerpjInit();
					consoleElement.innerHTML = ""; // Clear text
					
					// Create 800x600 Display (Matches your ZorkTerminal.java)
					await cheerpjCreateDisplay(800, 600, consoleElement);

					// Path Logic
					let rootPath = window.location.pathname;
					// Remove "games.html" from path if present
					rootPath = rootPath.substring(0, rootPath.lastIndexOf("/") + 1);
					
					// Point to the 'games' folder
					const jarPath = "/app" + rootPath + "games/" + games[gameId].jar;

					const javaArgs = games[gameId].args || [];
					
					console.log("Loading:", jarPath);
					console.log("With Args:", javaArgs)
					await cheerpjRunJar(jarPath, javaArgs);

				} catch (e) {
					consoleElement.innerHTML = `<p style="color:red">Error: ${e.message}</p>`;
				}
			} else {
				consoleElement.innerHTML = `<p class="status-text">>> SYSTEM IDLE. <br>>> PLEASE INSERT CARTRIDGE (Select from menu).</p>`;
			}
		})();
	</script>
</body>
</html>

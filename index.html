<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethan | Portfolio</title>
    
    <link rel="stylesheet" href="styles/normalize.css">
    <link rel="stylesheet" href="styles/styles.css">

    <script src="https://cjrtnc.leaningtech.com/3.0/cj3loader.js"></script>
</head>
<body>

    <header class="site-header">
        <div class="container">
            <h1 class="logo">ethan@etonkabonk:~$</h1>
            <nav>
                <a href="#about">./about</a>
                <a href="#projects">./projects</a>
                <a href="#terminal">./play_zork</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <section id="about" class="intro-grid">
            <div class="text-content">
                <h2>About Me</h2>
                <p>Hello. I'm a developer focusing on systems, data, and retro-gaming. Welcome to my digital workspace.</p>
                <a href="#terminal" class="btn primary">Run Game</a>
            </div>
            <div class="image-wrapper">
                <img src="images/selfie.JPG" alt="Ethan's Portrait" class="profile-pic">
            </div>
        </section>

        <section id="terminal" class="game-section">
            <h2>Interactive Terminal</h2>
            <div class="terminal-window">
                <div class="terminal-bar">
                    <div class="dots">
                        <span class="dot red"></span>
                        <span class="dot yellow"></span>
                        <span class="dot green"></span>
                    </div>
                    <span class="title">ethan@etonkabonk: ~/Work/Portfolio/textGame</span>
                </div>
                <div id="console-display" class="terminal-body">
                    <p class="loading-text">Initializing Java Virtual Machine...</p>
                </div>
            </div>
            <p class="caption">Type commands directly into the window above.</p>
        </section>
    </main>

    <footer class="site-footer">
        <p>&copy; 2026 Ethan. Built with &hearts; and Debian.</p>
    </footer>

	<script>
		(async function() {
			try {
				// 1. Initialize CheerpJ
				await cheerpjInit();

				const consoleElement = document.getElementById('console-display');
				consoleElement.innerHTML = ""; // Clear loading text

				// 2. Create the display (80x25 standard terminal)
				const cjDisplay = await cheerpjCreateDisplay(80, 25, consoleElement);

				// 3. DYNAMIC PATH FIX
				// We get the current folder path (e.g., "/Portfolio" or just "")
				// preventing the 404 error on GitHub Pages.
				let rootPath = window.location.pathname;
				// Remove 'index.html' if it's in the URL
				rootPath = rootPath.substring(0, rootPath.lastIndexOf("/") + 1);
				
				// Construct the path CheerpJ needs. 
				// /app/ mounts the domain root, so we append the folder path.
				// Result example: "/app/Portfolio/textGame/Zork.jar"
				const jarPath = "/app" + rootPath + "textGame/Zork.jar";
				const mapPath = "dungeon.zork";

				console.log("Loading JAR from:", jarPath); // Check your F12 Console if it fails!

				// 4. Run the JAR
				await cheerpjRunJar(jarPath, [mapPath]);

			} catch (e) {
				console.error(e);
				document.getElementById('console-display').innerHTML = 
					"<p style='color:red'>Error loading Java VM. Check F12 Console.</p>";
			}
		})();
	</script>
</body>
</html>

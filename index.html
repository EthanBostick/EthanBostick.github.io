<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethan | Portfolio</title>
    
    <link rel="stylesheet" href="styles/normalize.css">
    <link rel="stylesheet" href="styles/styles.css">

    <script src="https://cjrtnc.leaningtech.com/3.0/cj3loader.js"></script>
</head>
<body>

    <header class="site-header">
        <div class="container">
            <h1 class="logo">ethan@etonkabonk:~$</h1>
            <nav>
                <a href="#about">./about</a>
                <a href="#projects">./projects</a>
                <a href="#terminal">./play_zork</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <section id="about" class="intro-grid">
            <div class="text-content">
                <h2>About Me</h2>
                <p>Hello. I'm a developer focusing on systems, data, and retro-gaming. Welcome to my digital workspace.</p>
                <a href="#terminal" class="btn primary">Run Game</a>
            </div>
            <div class="image-wrapper">
                <img src="images/selfie.JPG" alt="Ethan's Portrait" class="profile-pic">
            </div>
        </section>

        <section id="terminal" class="game-section">
            <h2>Interactive Terminal</h2>
            <div class="terminal-window">
                <div class="terminal-bar">
                    <div class="dots">
                        <span class="dot red"></span>
                        <span class="dot yellow"></span>
                        <span class="dot green"></span>
                    </div>
                    <span class="title">ethan@etonkabonk: ~/Work/Portfolio/textGame</span>
                </div>
                <div id="console-display" class="terminal-body">
                    <p class="loading-text">Initializing Java Virtual Machine...</p>
                </div>
            </div>
            <p class="caption">Type commands directly into the window above.</p>
        </section>
    </main>

    <footer class="site-footer">
        <p>&copy; 2026 Ethan. Built with &hearts; and Debian.</p>
    </footer>

	<script>
		(async function() {
			try {
				await cheerpjInit();
				const consoleElement = document.getElementById('console-display');
				consoleElement.innerHTML = ""; 

				const cjDisplay = await cheerpjCreateDisplay(80, 25, consoleElement);

				// --- THE FIX ---
				// 1. Get the current folder path from the browser URL
				// On Localhost, this might be "/"
				// On GitHub, this is likely "/Portfolio/" (or your repo name)
				let repoPath = window.location.pathname;
				
				// Cleanup: Ensure it ends with a slash and remove 'index.html' if present
				if (repoPath.endsWith("index.html")) {
					repoPath = repoPath.substring(0, repoPath.lastIndexOf("/") + 1);
				}
				if (!repoPath.endsWith("/")) {
					repoPath += "/";
				}

				// 2. Construct the absolute paths for CheerpJ
				// /app/ is the virtual root where CheerpJ mounts your website
				const jarPath = "/app" + repoPath + "textGame/Zork.jar";
				const mapPath = "/app" + repoPath + "textGame/dungeon.zork";

				console.log("Java Main Args[0] will be:", mapPath); 

				// 3. Pass the mapPath as the first argument (args[0])
				await cheerpjRunJar(jarPath, [mapPath]);

			} catch (e) {
				console.error(e);
			}
		})();
	</script>
</body>
</html>
